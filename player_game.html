<div id="history">
  <h3>Last 10 Outcomes & Serials:</h3>
  <ul id="historyList"></ul>
</div>

<script>
let roundCount = 0;
let lastNumber = null;
let lastColor = null;
let numberSerial = 0;
let colorSerial = 0;

function playRound(){
  roundCount++;
  const sizes=['Big','Small'];
  const colors=['Red','Green','Purple'];
  const numbers=[0,1,2,3,4,5,6,7,8,9];

  const sizeResult = sizes[Math.floor(Math.random()*sizes.length)];
  const colorResult = colors[Math.floor(Math.random()*colors.length)];
  const numberResult = numbers[Math.floor(Math.random()*numbers.length)];

  // Check serials
  if(numberResult === lastNumber){ numberSerial++; } else { numberSerial = 1; lastNumber = numberResult; }
  if(colorResult === lastColor){ colorSerial++; } else { colorSerial = 1; lastColor = colorResult; }

  let win=false;
  if(userBet===sizeResult || userBet===colorResult || userBet===numberResult) win=true;
  if(win) balance += betAmount; else balance -= betAmount;
  updateBalance();

  historyArr.unshift({
    round: roundCount,
    size:sizeResult, color:colorResult, number:numberResult, win,
    numberSerial, colorSerial,
    playerBet:userBet, amount:betAmount
  });
  if(historyArr.length>10) historyArr.pop();
  renderHistory();

  // Save for admin
  const allBets = JSON.parse(localStorage.getItem('bets')||'[]');
  allBets.push({
    player, bet:userBet, amount:betAmount,
    size:sizeResult, color:colorResult, number:numberResult,
    win, timestamp:new Date().toLocaleString(),
    balance, numberSerial, colorSerial
  });
  localStorage.setItem('bets', JSON.stringify(allBets));

  document.getElementById('result').textContent=
    `Round ${roundCount} → Size: ${sizeResult}, Color: ${colorResult}, Number: ${numberResult}. ${win?'WIN!':'LOSE!'}`;
  userBet=null;
}

function renderHistory(){
  const ul = document.getElementById('historyList');
  ul.innerHTML='';
  historyArr.forEach(h=>{
    const li=document.createElement('li');
    li.textContent=
      `Round ${h.round}: Bet:${h.playerBet} Amt:${h.amount.toLocaleString()} → Result: Size:${h.size}, Color:${h.color} (#${h.colorSerial}), Number:${h.number} (#${h.numberSerial}) → ${h.win?'WIN':'LOSE'}`;
    ul.appendChild(li);
  });
}
</script>